---
title: "add seqs to pcr pools"
output:
  pdf_document: default
params: 
  type: "pcr"
  id: "pcr_id"
  db: "Laboratory"
  first: P073
  last: P128

  
---

Access database.
```{r workspace, echo = F, message=FALSE}
source("../genomics/scripts/lab_helpers.R")
write <- write_db(params$db)
library(knitr)

# pull in entire db table
db <- read_db(params$db)
dat <- db %>% tbl(params$type) %>% collect()
```
Find the range of rows to be changed
```{r change}
# change plate names
change <- dat %>%
  filter(pcr_id >= params$first & pcr_id <= params$last) %>% 
  mutate(SEQ = ifelse(pcr_id >= params$first & pcr_id <= "P088", "SEQ28", SEQ), 
    SEQ = ifelse(pcr_id >= "P089" & pcr_id <= "P102", "SEQ29", SEQ),
    SEQ = ifelse(pcr_id >= "P103" & pcr_id <= "P116", "SEQ30", SEQ),
    SEQ = ifelse(pcr_id >= "P117" & pcr_id <= "P128", "SEQ31", SEQ))




dat <- change_rows(dat, change, params$id)

```
Write to database
```{r write}
# dbWriteTable(write, params$type, dat, row.names = F, overwrite = T, append = F)
# dbDisconnect(write)
```

