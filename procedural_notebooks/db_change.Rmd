---
title: "add notes about mistakes for  `r params$first` - `r params$last`"
output:
  pdf_document: default
params: 
  type: "ligation"
  id: "ligation_id"
  db: "Laboratory"
  first: L5431
  last: L5463
  
---

Access database.
```{r workspace, echo = F, message=FALSE}
source("../genomics/scripts/lab_helpers.R")
write <- write_db(params$db)
library(knitr)

# pull in entire db table
db <- read_db(params$db)
dat <- db %>% tbl(params$type) %>% collect()
```
Find the range of rows to be changed
```{r change}
# change plate names
change <- dat %>%
  filter(digest_id >= "D4396" & digest_id <= "D4431") %>% 
  filter(pool == "P102") %>% 
  mutate(notes = ifelse(is.na(notes), "due to an error in the robot files, these samples may have received double the amount of digest and water", paste0("due to an error in the robot files, these samples may have received double the amount of digest and water, ", notes)))

dat <- change_rows(dat, change, params$id)

```
Write to database
```{r write}
# dbWriteTable(write, params$type, dat, row.names = F, overwrite = T, append = F)
# dbDisconnect(write)
```

