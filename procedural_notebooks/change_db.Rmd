---
title: "Update database"
output:
  pdf_document: default
  html_notebook: default
---

Cleaned plate - updating final volume in database
```{r}
plate <- "D5581-D5675"
first <- substr(plate, 1, 5)
last <- substr(plate, 7, 11)
```


This script will change rows in the database to update information.
```{r echo = F, message=FALSE}
source("../genomics/scripts/lab_helpers.R")
lab <- write_db("Laboratory")
library(knitr)
```

Update the database for the recent plate of digests
```{r}
# pull in all table
# extr <- lab %>% dbReadTable("extraction") %>% collect()
digs <- lab %>% dbReadTable("digest") %>% collect()
# ligs <- lab %>% dbReadTable("ligation") %>% collect()

change <- digs %>% 
  filter(digest_id >= first, digest_id <= last) %>% 
  mutate(final_vol = 40)

digs <- change_rows(digs, change, "digest_id")

################### BE CAREFUL ########################################
# dbWriteTable(lab, "extraction", extr, row.names = F, overwrite = T)
# dbWriteTable(lab, "digest", digs, row.names = F, overwrite = T)
# 
# dbDisconnect(lab)
# rm(lab)

```
