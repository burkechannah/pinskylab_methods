---
title: "Change Database"
output:
  pdf_document: default
  html_notebook: default
---

This script will change rows in the database to update information.
```{r echo = F}
source("../laboratory/scripts/lab_helpers.R")
lab <- write_db("Laboratory")
library(knitr)
```

1. Pull in an entire table.
```{r}
# pull in all table
extr <- lab %>% dbReadTable("extraction") %>% collect()
# digs <- lab %>% dbReadTable("digest") %>% collect()
# ligs <- lab %>% dbReadTable("ligation") %>% collect()

# list of extraction_ids to change
samples <- c("E0331", "E0446", "E0459", "E0468", "E0509", "E0519", "E0443", "E0494", "E1331", "E1334", "E1389")

change <- extr %>%
  filter(extraction_id %in% samples, notes != "empty") %>%
  mutate(notes = ifelse(is.na(notes), "empty", paste("empty, ", notes)))
kable(change)



extr <- change_rows(extr, change, "extraction_id")
 

################### BE CAREFUL ########################################
# dbWriteTable(lab, "extraction", extr, row.names = F, overwrite = T)
# dbWriteTable(lab, "digest", digs, row.names = F, overwrite = T)
# dbWriteTable(lab, "ligation", ligs, row.names = F, overwrite = T)
# 
# dbDisconnect(lab)
# rm(lab)

```
